(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[409],{9518:function(e,l,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/agreement/test",function(){return s(9577)}])},9577:function(e,l,s){"use strict";s.r(l);var a=s(5893),i=s(1164),d=s(1163),n=s(7294),t=s(381),c=s.n(t),r=s(4173),o=s(8085);l.default=()=>{var e,l,s;let t=(0,d.useRouter)(),[m,v]=(0,n.useState)(),[x,p]=(0,n.useState)(),[u,h]=(0,n.useState)(),[j,g]=(0,n.useState)(0),[b,f]=(0,n.useState)(null),[N,y]=(0,n.useState)(null),[k,w]=(0,n.useState)([]),[_,S]=(0,n.useState)(new Date),[A,E]=(0,n.useState)({name:"કૈલાશ ડેવલોપર્સ",key:"kailash developers"}),[I,T]=(0,n.useState)([{name:"કૈલાશ ડેવલોપર્સ",key:"kailash developers"},{name:"ત્રિલોક ડેવલોપર્સ",key:"trilok developers"},{name:"શિવ ડેવલોપર્સ",key:"shiv developers"}]),D=()=>{if(!b||!N)return;let e=new Date(b),l=new Date(N),s=[],a=new Date(e);for(;a<=l;){let e=a.toLocaleString("default",{month:"short"}),l=a.getFullYear();s.push({month:"".concat(e,"-").concat(l),amount:100}),a.setMonth(a.getMonth()+1)}w(s)};(0,n.useEffect)(()=>{g(k.reduce((e,l)=>e+l.amount,0))},[k]);let O=async()=>{try{let e=await i.Z.get("/project");v(e.data.data),t.query.projectId||t.push({query:{projectId:e.data.data[0]._id}})}catch(e){console.log("Error fetching data:",e)}};(0,n.useEffect)(()=>{O()},[]),(0,n.useEffect)(()=>{p(t.query.projectId),P()},[t.query.projectId]);let C=(e,l)=>{let s=[...k];s[l]={...s[l],amount:Number(e.value)},w(s)},M=async(e,l)=>{try{let s={...u};s.installments[l]={...s.installments[l],amount:Number(e.value)},h(s);let a=await i.Z.put("/agreement?project_id=".concat(t.query.projectId),{installments:s.installments});P(),r.Am.success(a.data.message)}catch(e){console.log("error in handleUpdateAmountKeyDown : ",e)}},q=async()=>{try{let e=await i.Z.post("/agreement",{project_id:t.query.projectId,installments:k,booking_date:_,developers_name:A});P(),w([]),r.Am.success(e.data.message)}catch(s){var e,l;console.log("error===>>",s),r.Am.error(null==s?void 0:null===(l=s.response)||void 0===l?void 0:null===(e=l.data)||void 0===e?void 0:e.message)}},L=async()=>{try{let e=await i.Z.put("/agreement?project_id=".concat(t.query.projectId),{installments:k.length?k:u.installments,booking_date:_,developers_name:A});w([]),P(),r.Am.success(e.data.message)}catch(s){var e,l;console.log("error===>>",s),r.Am.error(null==s?void 0:null===(l=s.response)||void 0===l?void 0:null===(e=l.data)||void 0===e?void 0:e.message)}},P=async()=>{try{let e=await i.Z.get("/agreement?project_id=".concat(t.query.projectId));h(e.data.agreement),S(e.data.agreement.booking_date),E(e.data.agreement.developers_name),f(e.data.agreement.installments[0].month),y(e.data.agreement.installments[e.data.agreement.installments.length-1].month)}catch(s){var e,l;console.log("error===>>",s),r.Am.error(null==s?void 0:null===(l=s.response)||void 0===l?void 0:null===(e=l.data)||void 0===e?void 0:e.message)}},F=e=>String(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].indexOf(e)+1).padStart(2,"0");return(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-10 gap-3",children:[(0,a.jsx)("div",{className:"col-span-2 flex items-end justify-start",children:(0,a.jsxs)("div",{className:"relative w-full sm:w-[50%] lg:w-[70%]  border  border-gray-300 text-gray-800 bg-white",children:[(0,a.jsx)("select",{className:"appearance-none w-full py-2  focus:outline-none px-2  bg-white",name:"project",id:"project",onChange:e=>t.push({query:{projectId:e.target.value}}),value:x,children:m&&(null==m?void 0:m.map(e=>(0,a.jsx)("option",{className:"".concat(x===(null==e?void 0:e._id)?"bg-primary":"hover:bg-gray-300"),value:null==e?void 0:e._id,children:null==e?void 0:e.project_name},null==e?void 0:e._id)))}),(0,a.jsx)("div",{className:"pointer-events-none absolute right-0 top-0 bottom-0 flex items-center px-2 text-gray-700 border-l",children:(0,a.jsx)("svg",{className:"h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})})]})}),(0,a.jsxs)("div",{className:"col-span-6 flex justify-center gap-3 items-end",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("label",{children:"Select Developers Name:"}),(0,a.jsx)("select",{className:" w-full h-10 border-2 border-black  rounded focus:outline-none px-2  bg-white",name:"project",id:"project",onChange:e=>{E(I.find(l=>l.key==e.target.value))},value:null==A?void 0:A.key,children:I&&(null==I?void 0:I.map(e=>(0,a.jsx)("option",{className:"".concat((null==A?void 0:A.key)===(null==e?void 0:e.key)?"bg-primary":"hover:bg-gray-300"),value:null==e?void 0:e.key,children:null==e?void 0:e.name},null==e?void 0:e.key)))})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("label",{children:"Select Booking Date:"}),(0,a.jsx)("input",{className:"border-2 border-black p-1 rounded",type:"date",onChange:e=>S(e.target.value),defaultValue:null===(e=new Date(_).toISOString())||void 0===e?void 0:e.split("T")[0]})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("label",{children:"Select Start Month:"}),(0,a.jsx)("input",{className:"border-2 border-black p-1 rounded",type:"month",onChange:e=>{f(e.target.value)},defaultValue:"".concat(null==b?void 0:b.split("-")[1],"-").concat(F(null==b?void 0:b.split("-")[0]))})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("label",{children:"Select End Month:"}),(0,a.jsx)("input",{className:"border-2 border-black p-1 rounded",type:"month",onChange:e=>{y(e.target.value)},defaultValue:"".concat(null==N?void 0:N.split("-")[1],"-").concat(F(null==N?void 0:N.split("-")[0]))})]})]}),(0,a.jsxs)("div",{className:"col-span-2 flex justify-between gap-2 items-end",children:[(0,a.jsx)("div",{className:"md:text-center text-sm",children:(0,a.jsx)("button",{onClick:()=>D(),className:"flex gap-1 md:gap-2 items-center bg-primary font-semibold py-2 px-2 md:px-4 border-2 border-black rounded",children:"Generate Agreement"})}),(null==u?void 0:u.installments)?(0,a.jsx)("div",{className:"md:text-center text-sm",children:(0,a.jsx)("button",{onClick:()=>L(),className:"flex gap-1 md:gap-2 items-center bg-primary font-semibold py-2 px-2 md:px-4 border-2 border-black rounded",children:"Update Agreement"})}):(0,a.jsx)("div",{className:"md:text-center text-sm",children:(0,a.jsx)("button",{onClick:()=>q(),className:"flex gap-1 md:gap-2 items-center bg-primary font-semibold py-2 px-2 md:px-4 border-2 border-black rounded",children:"Save Agreement"})})]})]}),(0,a.jsx)("div",{className:"flex justify-center my-10",children:(0,a.jsxs)("div",{className:"w-[40vw] divide-y-2 divide-black border-2 border-black",children:[(0,a.jsxs)("div",{className:"text-center font-bold text-lg bg-purple-200 uppercase",children:[null==A?void 0:A.key," -"," ",null==m?void 0:null===(l=m.find(e=>e._id===x))||void 0===l?void 0:l.project_name," - 2BHK"]}),(0,a.jsxs)("div",{className:"text-center  divide-x-2 divide-black border-black  text-sm  grid grid-cols-12 ",children:[(0,a.jsx)("div",{className:"col-span-1 border-black flex items-center justify-center font-bold",children:"NO"}),(0,a.jsxs)("div",{className:"col-span-5  border-black flex items-center justify-center",children:[c()(_||"00-00-0000").format("DD-MM-YYYY")," ","BOOKING DATE TO ",(0,a.jsx)("br",{}),"PAYMENT CONDITION"]}),(0,a.jsxs)("div",{className:"col-span-6 divide-y-2 divide-black",children:[(0,a.jsxs)("div",{className:"h-7 grid grid-cols-12 border-black divide-x-2 divide-black",children:[(0,a.jsx)("div",{className:"col-span-4 flex items-center justify-center font-bold",children:"SQ.FT"}),(0,a.jsx)("div",{className:"col-span-8 flex items-center justify-center font-bold",children:"RATE"})]}),(0,a.jsxs)("div",{className:"h-7 grid grid-cols-12 border-black divide-x-2 divide-black",children:[(0,a.jsx)("div",{className:"col-span-4 flex items-center justify-center",children:"0000"}),(0,a.jsx)("div",{className:"col-span-8 flex items-center justify-center",children:"0.000"})]}),(0,a.jsx)("div",{className:"h-7 border-black flex items-center justify-center bg-green-100 font-bold",children:"TOTAL PAYMENT"}),(0,a.jsx)("div",{className:"h-7 border-black flex items-center justify-center bg-green-100",children:"0000.00"})]})]}),(0,a.jsxs)("div",{className:"flex flex-col divide-y-2 divide-black text-sm",children:[k&&k.length>0?null==k?void 0:k.map((e,l)=>(0,a.jsxs)("div",{className:"h-6 grid grid-cols-12 divide-x-2 divide-black",children:[(0,a.jsx)("div",{className:"col-span-1 flex items-center justify-center",children:l+1}),(0,a.jsx)("div",{className:"col-span-5 flex items-center justify-center",children:null==e?void 0:e.month}),(0,a.jsx)("div",{className:"col-span-6 flex items-center justify-center",children:(0,a.jsx)(o.y,{onSave:e=>C(e,l),type:"number",style:{backgroundColor:"transparent",border:"1px solid transparent",padding:"4px 8px",margin:"-4px -8px",width:"80%",textAlign:"center"},name:"amount",defaultValue:null==e?void 0:e.amount})})]},l)):null==u?void 0:null===(s=u.installments)||void 0===s?void 0:s.map((e,l)=>(0,a.jsxs)("div",{className:"h-6 grid grid-cols-12 divide-x-2 divide-black",children:[(0,a.jsx)("div",{className:"col-span-1 flex items-center justify-center",children:l+1}),(0,a.jsx)("div",{className:"col-span-5 flex items-center justify-center",children:null==e?void 0:e.month}),(0,a.jsx)("div",{className:"col-span-6 flex items-center justify-center",children:(0,a.jsx)(o.y,{onSave:e=>M(e,l),type:"number",style:{backgroundColor:"transparent",border:"1px solid transparent",padding:"4px 8px",margin:"-4px -8px",width:"80%",textAlign:"center"},name:"amount",defaultValue:null==e?void 0:e.amount})})]},l)),(null==k?void 0:k.length)||(null==u?void 0:u.installments.length)>0?(0,a.jsxs)("div",{className:"h-6 grid grid-cols-12 divide-x-2 divide-black",children:[(0,a.jsx)("div",{className:"col-span-1 flex items-center justify-center",children:(null==k?void 0:k.length)>0?(null==k?void 0:k.length)+1:(null==u?void 0:u.installments.length)+1}),(0,a.jsx)("div",{className:"col-span-5 flex items-center justify-center",children:"Final Pending Payment"}),(0,a.jsx)("div",{className:"col-span-6 flex items-center justify-center",children:null==j?void 0:j.toFixed(2)})]}):"",(0,a.jsxs)("div",{className:"bg-purple-200 h-7 grid grid-cols-12 divide-x-2 divide-black font-bold",children:[(0,a.jsx)("div",{className:"col-span-6 flex items-center justify-center",children:"Total Flat Payment"}),(0,a.jsx)("div",{className:"col-span-6 flex items-center justify-center",children:null==j?void 0:j.toFixed(2)})]})]}),(0,a.jsxs)("div",{className:"divide-y-2 divide-black text-sm",children:[(0,a.jsx)("div",{className:"h-7"}),(0,a.jsx)("div",{className:"flex items-center pl-2 py-1",children:"* દસ્તાવેજ, જી.એસ.ટી, મીટર, એડવાન્સ મેઇન્ટેનન્સ, ગેસલાઇન અને અન્ય કોઇ પણ સરકારી નાણા અલગથી ખરીદનારે આપવાના રહેશે."}),(0,a.jsxs)("div",{className:" flex items-center pl-2 py-1",children:["* ખરીદનાર પાર્ટીએ ",null==A?void 0:A.name,"ની તમામ શરતો ફરજીયાત માન્ય રાખવાની રહેશે."]}),(0,a.jsx)("div",{className:"flex items-center pl-2 py-1",children:"* હુ પેમેન્ટ કંડીશન અને ઉપરની અન્ય તમામ કંડીશન વાંચીને સહી કરી આપું છું."}),(0,a.jsxs)("div",{className:"grid grid-cols-12 divide-x-2 divide-black",children:[(0,a.jsxs)("div",{className:"col-span-6 grid grid-cols-10 divide-x-2 divide-black",children:[(0,a.jsx)("div",{className:"col-span-3 font-bold pl-2",children:"FLET NO.:"}),(0,a.jsx)("div",{className:"col-span-5"})]}),(0,a.jsxs)("div",{className:"col-span-6 grid grid-cols-10 divide-x-2 divide-black",children:[(0,a.jsx)("div",{className:"col-span-3 font-bold pl-2",children:"VILLAGE :"}),(0,a.jsx)("div",{className:"col-span-5"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-12 divide-x-2 divide-black",children:[(0,a.jsxs)("div",{className:"col-span-6 grid grid-cols-10 divide-x-2 divide-black",children:[(0,a.jsx)("div",{className:"col-span-3 font-bold pl-2",children:"MOBILE :"}),(0,a.jsx)("div",{className:"col-span-5"})]}),(0,a.jsxs)("div",{className:"col-span-6 grid grid-cols-10 divide-x-2 divide-black",children:[(0,a.jsx)("div",{className:"col-span-3 font-bold pl-2",children:"TALUKO :"}),(0,a.jsx)("div",{className:"col-span-5"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-12 divide-x-2 divide-black",children:[(0,a.jsxs)("div",{className:"col-span-6 grid grid-cols-10 divide-x-2 divide-black",children:[(0,a.jsx)("div",{className:"col-span-3 font-bold pl-2",children:"DATE :"}),(0,a.jsx)("div",{className:"col-span-5"})]}),(0,a.jsxs)("div",{className:"col-span-6 grid grid-cols-10 divide-x-2 divide-black",children:[(0,a.jsx)("div",{className:"col-span-3 font-bold pl-2",children:"DIST :"}),(0,a.jsx)("div",{className:"col-span-5"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-12 divide-x-2 divide-black",children:[(0,a.jsxs)("div",{className:"col-span-6 grid grid-cols-10 p-2",children:[(0,a.jsx)("div",{className:"col-span-3 font-bold",children:"સહી :"}),(0,a.jsx)("div",{className:"col-span-5"})]}),(0,a.jsxs)("div",{className:"col-span-6 grid grid-cols-10 p-2",children:[(0,a.jsx)("div",{className:"col-span-3 font-bold",children:"સહી :"}),(0,a.jsx)("div",{className:"col-span-5"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-12 h-20 divide-x-2 divide-black",children:[(0,a.jsx)("div",{className:"col-span-6 p-2",children:(0,a.jsx)("div",{className:"font-bold",children:"ખરીદનાર નું નામ :"})}),(0,a.jsx)("div",{className:"col-span-6 p-2",children:(0,a.jsx)("div",{className:"font-bold",children:"હસ્તક નું નામ :"})})]}),(0,a.jsx)("div",{className:"p-2",children:(0,a.jsxs)("div",{className:"mt-10",children:["બંને પાર્ટીની શરતઃ- બેંક અથવા રોક્ડ નાણા ભવિષયમાં રીટન કરવાના થશે તો તે નાણા ",null==A?void 0:A.name," ઓગેનાઈઝરની શરત મુજબ નાણા પરત કરીને ફલેટ કેન્સલ કરી શકશે."]})})]})]})})]})}},1164:function(e,l,s){"use strict";let a=s(5121).Z.create({baseURL:"/api"});a.interceptors.request.use(e=>{let l=localStorage.getItem("token");return l?e.headers.Authorization="Bearer ".concat(l):delete e.headers.Authorization,e},e=>Promise.reject(e)),a.interceptors.response.use(e=>e,e=>(e.response&&(401===e.response.status||403===e.response.status)&&(localStorage.removeItem("token"),window.location.href="/login"),Promise.reject(e))),l.Z=a}},function(e){e.O(0,[885,121,85,888,774,17